<!DOCTYPE html>
<html lang="en">
<head>
    <title>WebSocker Client</title>
</head>
<body>
    <form name="publish">
        <input type="text" name="message" maxlength="50"/>
        <input type="submit" value="Send">
    </form>
      
    <div id="messages"></div>
    <script>
        const socket = new WebSocket('ws://localhost:23765');
        socket.addEventListener('open', function (event) {
            socket.send('connect');
        });
    
        socket.addEventListener('message', function (event) {
            console.log(event.data);

            let messageElem = document.createElement('div');
            let outgoingMessage = event.data;
            messageElem.innerHTML = `<br>${outgoingMessage}`;
            document.getElementById('messages').prepend(messageElem);
        });
    
        function contactServer() {
            socket.send("Initialize");
        }

        document.forms.publish.onsubmit = function(event) {
            event.preventDefault();
            let outgoingMessage = this.message.value;
            socket.send(outgoingMessage);
        };
    </script>
</body>
</html>
